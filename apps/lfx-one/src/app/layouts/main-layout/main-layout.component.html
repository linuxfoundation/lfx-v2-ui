<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="flex min-h-screen">
  <!-- Sidebar - Desktop -->
  <div class="hidden lg:block w-64 flex-shrink-0 fixed top-0 left-0">
    <lfx-sidebar [items]="sidebarItems()" [footerItems]="sidebarFooterItems()" [showProjectSelector]="true"></lfx-sidebar>
  </div>

  <!-- Sidebar - Mobile Overlay -->
  @if (showMobileSidebar()) {
    <div class="lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50" data-testid="mobile-sidebar-overlay" (click)="closeMobileSidebar()">
      <div class="absolute top-0 left-0 bottom-0 w-64 bg-white shadow-xl" (click)="$event.stopPropagation()" data-testid="mobile-sidebar">
        <div class="flex items-center justify-between p-4 border-b border-gray-200">
          <h2 class="text-lg font-semibold text-gray-900">Menu</h2>
          <button
            type="button"
            class="hover:opacity-80 transition-opacity p-2"
            (click)="closeMobileSidebar()"
            aria-label="Close menu"
            data-testid="mobile-sidebar-close">
            <i class="fa-light fa-times text-gray-600 text-xl"></i>
          </button>
        </div>
        <div class="overflow-y-auto h-[calc(100vh-4rem)]">
          <lfx-sidebar [items]="sidebarItems()" [footerItems]="sidebarFooterItems()" [showProjectSelector]="true"></lfx-sidebar>
        </div>
      </div>
    </div>
  }

  <!-- Main Content Area -->
  <main class="flex-1 min-w-0 transition-all duration-300 lg:ml-64 flex flex-col" data-testid="main-content">
    <div class="flex-grow px-5 md:px-8 py-6">
      <router-outlet />
    </div>
    <!-- Footer Component -->
    <lfx-footer class="py-8 px-5 md:px-8 mt-auto"></lfx-footer>
  </main>
</div>
