<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<section class="flex flex-col flex-1" data-testid="dashboard-pending-actions-section">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4">
    <h2 class="py-1">Pending Actions</h2>
  </div>

  <!-- Scrollable Content -->
  <div class="flex flex-col flex-1 max-h-[28.125rem] overflow-y-auto">
    @if (pendingActions().length > 0) {
      <div class="flex flex-col gap-3" data-testid="dashboard-pending-actions-list">
        @for (item of pendingActions(); track $index) {
          <div
            class="p-4 border-0 rounded-lg shadow-md"
            [ngClass]="{
              'bg-yellow-50': item.color === 'amber',
              'bg-blue-50': item.color === 'blue',
              'bg-green-50': item.color === 'green',
              'bg-purple-50': item.color === 'purple',
            }"
            [attr.data-testid]="'dashboard-pending-actions-item-' + item.type">
            <!-- Header with Type -->
            <div class="flex items-start justify-between mb-3">
              <div class="flex items-center gap-2">
                <div
                  [ngClass]="{
                    'text-yellow-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  <i [ngClass]="[item.icon, 'w-4', 'h-4']"></i>
                </div>
                <span
                  class="text-xs font-medium"
                  [ngClass]="{
                    'text-yellow-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  {{ item.type }}
                </span>
              </div>
            </div>

            <!-- Action Text -->
            <div class="mb-4">
              <p
                class="text-sm font-medium"
                [ngClass]="{
                  'text-yellow-900': item.color === 'amber',
                  'text-blue-900': item.color === 'blue',
                  'text-green-900': item.color === 'green',
                  'text-purple-900': item.color === 'purple',
                }">
                {{ item.text }}
              </p>
            </div>

            <!-- Action Button -->
            @if (item.buttonLink) {
              <lfx-button
                size="small"
                class="w-full"
                styleClass="w-full"
                severity="secondary"
                rel="noopener noreferrer"
                [link]="true"
                [href]="item.buttonLink"
                target="_blank"
                (onClick)="handleActionClick(item)"
                [label]="item.buttonText">
              </lfx-button>
            } @else {
              <lfx-button
                size="small"
                class="w-full"
                styleClass="w-full text-sm"
                severity="secondary"
                (onClick)="handleActionClick(item)"
                [label]="item.buttonText">
              </lfx-button>
            }
          </div>
        }
      </div>
    } @else {
      <!-- Empty state - shows when no pending actions -->
      <div class="text-xs text-gray-500 py-8 text-center border-2 border-dashed border-gray-300 rounded-lg" data-testid="dashboard-pending-actions-empty">
        No pending actions
      </div>
    }
  </div>
</section>
