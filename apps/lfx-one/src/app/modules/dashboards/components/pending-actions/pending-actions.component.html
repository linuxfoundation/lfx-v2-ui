<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<section class="flex flex-col flex-1" data-testid="dashboard-pending-actions-section">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4">
    <h2 class="py-1">Pending Actions</h2>
  </div>

  <!-- Scrollable Content -->
  <div class="flex flex-col flex-1 max-h-[28.125rem] overflow-y-auto">
    @if (pendingActions().length > 0) {
      <div class="flex flex-col gap-3" data-testid="dashboard-pending-actions-list">
        @for (item of pendingActions(); track $index) {
          <div
            class="p-4 border rounded-lg"
            [ngClass]="{
              'bg-amber-50 border-amber-200': item.color === 'amber',
              'bg-blue-50 border-blue-200': item.color === 'blue',
              'bg-green-50 border-green-200': item.color === 'green',
              'bg-purple-50 border-purple-200': item.color === 'purple',
            }"
            [attr.data-testid]="'dashboard-pending-actions-item-' + item.type">
            <!-- Header with Type and Badge -->
            <div class="flex items-start justify-between mb-3">
              <div class="flex items-center gap-2">
                <div
                  [ngClass]="{
                    'text-amber-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  <i [ngClass]="[item.icon, 'w-4', 'h-4']"></i>
                </div>
                <span
                  class="text-xs font-medium"
                  [ngClass]="{
                    'text-amber-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  {{ item.type }}
                </span>
              </div>
              <lfx-tag
                [value]="item.badge"
                severity="secondary"
                styleClass="bg-white border border-gray-200"
                data-testid="dashboard-pending-actions-badge"></lfx-tag>
            </div>

            <!-- Action Text -->
            <div class="mb-4">
              <p
                class="text-sm font-medium"
                [ngClass]="{
                  'text-amber-900': item.color === 'amber',
                  'text-blue-900': item.color === 'blue',
                  'text-green-900': item.color === 'green',
                  'text-purple-900': item.color === 'purple',
                }">
                {{ item.text }}
              </p>
            </div>

            <!-- Action Button -->
            @if (item.buttonLink) {
              <a
                [href]="item.buttonLink"
                target="_blank"
                rel="noopener noreferrer"
                class="w-full h-8 rounded-md px-3 text-sm font-medium border border-gray-300 bg-white text-gray-700 hover:bg-slate-100 transition-colors flex items-center justify-center"
                data-testid="dashboard-pending-actions-button">
                {{ item.buttonText }}
              </a>
            } @else {
              <button
                type="button"
                (click)="handleActionClick(item)"
                class="w-full h-8 rounded-md px-3 text-sm font-medium border border-gray-300 bg-white text-gray-700 hover:bg-slate-100 transition-colors"
                data-testid="dashboard-pending-actions-button">
                {{ item.buttonText }}
              </button>
            }
          </div>
        }
      </div>
    } @else {
      <!-- Empty state - shows when no pending actions -->
      <div class="text-xs text-gray-500 py-8 text-center border-2 border-dashed border-gray-300 rounded-lg" data-testid="dashboard-pending-actions-empty">
        No pending actions
      </div>
    }
  </div>
</section>
