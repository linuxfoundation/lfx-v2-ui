<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<section class="flex flex-col flex-1" data-testid="dashboard-pending-actions-section">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4 px-2">
    <h2 class="py-1 flex items-center gap-2">
      <i class="fa-light fa-list-check text-lg"></i>
      <span>Pending Actions</span>
    </h2>
  </div>

  <!-- Scrollable Content -->
  <div class="flex flex-col flex-1 max-h-[30rem] overflow-y-auto px-2 py-2 -mt-2">
    @if (pendingActions().length > 0) {
      <div class="flex flex-col gap-3" data-testid="dashboard-pending-actions-list">
        @for (item of pendingActions(); track $index) {
          <div
            class="p-4 border rounded-lg shadow-md space-y-3"
            [ngClass]="{
              'bg-yellow-50 hover:border-yellow-300': item.color === 'amber',
              'bg-blue-200 hover:border-blue-300': item.color === 'blue',
              'bg-green-200 hover:border-green-300': item.color === 'green',
              'bg-purple-200 hover:border-purple-300': item.color === 'purple',
            }"
            [attr.data-testid]="'dashboard-pending-actions-item-' + item.type">
            <!-- Header with Type -->
            <div class="flex items-center gap-2 flex-wrap">
              <div
                class="flex items-center gap-2 px-2 py-1 rounded-md text-xs"
                [ngClass]="{
                  'bg-yellow-200': item.color === 'amber',
                  'bg-blue-300': item.color === 'blue',
                  'bg-green-300': item.color === 'green',
                  'bg-purple-300': item.color === 'purple',
                }">
                <div
                  [ngClass]="{
                    'text-yellow-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  <i [ngClass]="[item.icon, 'w-3']"></i>
                </div>
                <span
                  class="text-xs font-medium"
                  [ngClass]="{
                    'text-amber-700': item.color === 'amber',
                    'text-blue-700': item.color === 'blue',
                    'text-green-700': item.color === 'green',
                    'text-purple-700': item.color === 'purple',
                  }">
                  {{ item.type }}
                </span>
              </div>
            </div>

            <!-- Action Text -->
            <div class="flex items-start justify-between gap-2">
              <div class="flex flex-col gap-1">
                <p class="text-sm leading-tight font-medium text-gray-900">
                  {{ item.text }}
                </p>
                @if (item.date) {
                  <div class="flex items-center gap-2 flex-wrap mt-0.5">
                    <span class="text-xs text-gray-600 whitespace-nowrap">{{ item.date }}</span>
                  </div>
                }
              </div>
            </div>

            <!-- Action Button -->
            <div class="flex gap-2">
              @if (item.buttonLink) {
                <lfx-button
                  size="small"
                  class="w-full"
                  styleClass="w-full text-sm"
                  severity="secondary"
                  rel="noopener noreferrer"
                  [link]="true"
                  [href]="item.buttonLink"
                  target="_blank"
                  (onClick)="handleActionClick(item)"
                  [label]="item.buttonText">
                </lfx-button>
              } @else {
                <lfx-button
                  size="small"
                  class="w-full text-sm"
                  styleClass="w-full text-sm"
                  severity="secondary"
                  (onClick)="handleActionClick(item)"
                  [label]="item.buttonText">
                </lfx-button>
              }
            </div>
          </div>
        }
      </div>
    } @else {
      <!-- Empty state - shows when no pending actions -->
      <div class="text-xs text-gray-500 py-8 text-center border-2 border-dashed border-gray-300 rounded-lg" data-testid="dashboard-pending-actions-empty">
        No pending actions
      </div>
    }
  </div>
</section>
