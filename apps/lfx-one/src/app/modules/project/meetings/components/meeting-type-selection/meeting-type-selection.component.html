<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="flex flex-col gap-6">
  @if (projectOptions().length > 0) {
    <div data-testid="meeting-project-selector">
      <label for="project-select" class="text-sm font-semibold text-slate-900 mb-2 block">Select Project</label>
      <p class="text-xs text-slate-500 mb-3">Choose which project this meeting is for. If not selected, the current project will be used.</p>
      <lfx-select
        class="w-full"
        styleClass="w-full"
        id="project-select"
        [form]="form()"
        control="selectedProjectUid"
        [options]="projectOptions()"
        placeholder="Select a project (optional)"
        [showClear]="true"
        data-testid="project-select-dropdown" />
    </div>
  }

  <div class="flex flex-col">
    <div class="text-center mb-4">
      <h2 class="text-2xl font-semibold text-slate-900 mb-2">Meeting Type</h2>
      <p class="text-slate-500 text-base">What kind of meeting are you organizing for your open source project?</p>
    </div>

    <lfx-message severity="info" icon="fa-light fa-info-circle" title="Why meetings matter for open source projects">
      <ng-template #content>
        <div class="flex flex-col gap-1">
          <p class="text-sm">
            Regular meetings help maintain project momentum, align contributors, make important decisions, and build community. They provide structure and
            transparency that keeps everyone on the same page.
          </p>
        </div>
      </ng-template>
    </lfx-message>
  </div>

  <div class="space-y-6">
    <div>
      <label class="text-sm font-semibold text-slate-900 mb-4 block">Select Meeting Type <span class="text-red-500">*</span></label>
      <div
        class="grid gap-3"
        [ngClass]="{
          'grid-cols-1 md:grid-cols-1': gridColumns() === 3,
          'grid-cols-1 md:grid-cols-2': gridColumns() === 2,
          'grid-cols-1': gridColumns() === 1,
        }">
        @for (option of meetingTypeOptions(); track option.value) {
          <div
            class="p-4 border rounded-lg cursor-pointer transition-all hover:border-blue-600 hover:bg-blue-50"
            [ngClass]="{
              'border-blue-600 bg-blue-50': form().get('meeting_type')?.value === option.value,
              'border-slate-200 bg-white': form().get('meeting_type')?.value !== option.value,
            }"
            (click)="onMeetingTypeSelect(option.value)"
            [attr.data-testid]="'meeting-type-option-' + option.value.toLowerCase()">
            <div class="flex items-start gap-3">
              <div class="p-2 rounded-lg flex-shrink-0" [style.background-color]="option.info.color + '1A'" [style.color]="option.info.color">
                <i [class]="option.info.icon + ' text-base'"></i>
              </div>
              <div>
                <h4 class="text-sm font-semibold text-slate-900">{{ option.label }}</h4>
                <p class="text-xs text-slate-600 mt-1">{{ option.info.description }}</p>
                <p class="text-xs text-slate-500 mt-1 italic">Examples: {{ option.info.examples }}</p>
              </div>
            </div>
          </div>
        }
      </div>
      @if (form().get('meeting_type')?.errors?.['required'] && form().get('meeting_type')?.touched) {
        <p class="text-sm text-red-600 mt-2">Meeting type is required</p>
      }
    </div>
  </div>

  <div class="space-y-4">
    <div>
      <h3 class="text-lg font-semibold text-slate-900">Meeting Access</h3>
      <p class="text-sm text-slate-600 mt-1">Control who can view and join this meeting</p>
    </div>

    <div class="bg-slate-50 border border-slate-200 p-4 rounded-lg">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <i class="fa-light fa-shield text-slate-500 text-lg"></i>
          <div>
            <label for="private-toggle" class="text-sm font-semibold text-slate-900">Restricted Meeting</label>
            <p class="text-xs text-slate-500">Restrict access to invited guests only</p>
          </div>
        </div>
        <lfx-toggle id="private-toggle" [form]="form()" control="restricted" size="small" data-testid="private-meeting-toggle"> </lfx-toggle>
      </div>
    </div>
  </div>
</div>
