<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div>
  @if (label()) {
    <h3 class="mb-4">
      {{ label() }}
      @if (required()) {
        <span class="text-red-500">*</span>
      }
    </h3>
  }
  <div
    class="grid gap-3"
    [ngClass]="{
      'grid-cols-1 md:grid-cols-3': gridColumns() === 3,
      'grid-cols-1 md:grid-cols-2': gridColumns() === 2,
      'grid-cols-1': gridColumns() === 1,
    }">
    @for (option of options(); track option.value) {
      <div
        class="p-4 border-2 rounded-lg cursor-pointer transition-all text-left"
        [ngClass]="{
          'border-gray-200 bg-white hover:border-gray-300': form().get(control())?.value !== option.value,
        }"
        [style.border-color]="form().get(control())?.value === option.value ? option.info.color : null"
        [style.background-color]="form().get(control())?.value === option.value ? option.info.color + '15' : null"
        (click)="onSelect(option.value)"
        [attr.data-testid]="testIdPrefix() + '-option-' + option.value">
        <div class="flex items-start gap-3">
          <div
            class="w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center"
            [style.background-color]="form().get(control())?.value === option.value ? option.info.color : option.info.color + '1A'"
            [style.color]="form().get(control())?.value === option.value ? 'white' : option.info.color">
            <i [class]="option.info.icon + ' text-xl'"></i>
          </div>
          <div class="flex-1">
            <h4 class="text-neutral-950 mb-1">{{ option.label }}</h4>
            <p class="text-sm text-gray-600">{{ option.info.description }}</p>
          </div>
        </div>
      </div>
    }
  </div>
  @if (form().get(control())?.errors?.['required'] && form().get(control())?.touched) {
    <p class="text-sm text-red-600 mt-2">{{ errorMessage() }}</p>
  }
</div>
