<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<ng-container [formGroup]="form()">
  @if (label()) {
    <label [for]="control()" class="block text-sm font-medium text-gray-700 mb-1">
      {{ label() }}
      @if (required()) {
        <span class="text-red-500">*</span>
      }
    </label>
  }

  <div class="relative">
    <input
      pInputText
      [formControlName]="control()"
      [placeholder]="placeholder()"
      [pSize]="size() || 'small'"
      [class]="width()"
      (focus)="onInputFocus($event)"
      (input)="onInput($event)"
      (blur)="onInputBlur($event)" />

    <p-popover #timePopover styleClass="time-picker-popover" [class]="width()">
      <div class="flex flex-col gap-1 p-2">
        @for (option of visibleTimeOptions(); track option.value) {
          <a class="text-sm text-left px-3 py-2 rounded hover:bg-gray-100 cursor-pointer" (click)="onTimeOptionClick(option)">
            {{ option.label }}
          </a>
        }

        @if (visibleTimeOptions().length === 0) {
          @for (option of timeOptions(); track option.value) {
            <a class="text-sm text-left px-3 py-2 rounded hover:bg-gray-100 cursor-pointer" (click)="onTimeOptionClick(option)">
              {{ option.label }}
            </a>
          }
        }
      </div>
    </p-popover>
  </div>
</ng-container>
