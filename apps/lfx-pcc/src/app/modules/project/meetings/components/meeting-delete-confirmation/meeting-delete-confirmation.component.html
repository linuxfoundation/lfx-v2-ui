<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="meeting-delete-confirmation">
  <!-- Meeting Details -->
  <div class="mb-6">
    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900 mb-3">Meeting Details</h3>

      <div class="space-y-2">
        <div class="flex items-start">
          <span class="font-medium text-gray-700 w-20 flex-shrink-0">Title:</span>
          <span class="text-gray-900">{{ meeting.title || 'Untitled Meeting' }}</span>
        </div>

        <div class="flex items-start">
          <span class="font-medium text-gray-700 w-20 flex-shrink-0">Date:</span>
          <span class="text-gray-900">{{ meeting.start_time | meetingTime: meeting.duration : 'date' }}</span>
        </div>

        <div class="flex items-start">
          <span class="font-medium text-gray-700 w-20 flex-shrink-0">Time:</span>
          <span class="text-gray-900">{{ meeting.start_time | meetingTime: meeting.duration : 'time' }}</span>
        </div>

        <div class="flex items-start">
          <span class="font-medium text-gray-700 w-20 flex-shrink-0">Guests:</span>
          <span class="text-gray-900">{{ participantCount }} participant{{ participantCount !== 1 ? 's' : '' }}</span>
        </div>

        @if (isRecurring) {
          <div class="flex items-start">
            <span class="font-medium text-gray-700 w-20 flex-shrink-0">Type:</span>
            <span class="text-gray-900 flex items-center gap-2">
              <i class="fa-light fa-repeat text-blue-500"></i>
              Recurring Meeting
            </span>
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Recurrence Options -->
  @if (isRecurring && !isPastMeeting) {
    <div class="mb-6">
      <h4 class="text-md font-semibold text-gray-900 mb-3">Delete Options</h4>
      <div class="space-y-4">
        <div class="flex items-start gap-3">
          <lfx-radio-button [form]="deleteForm" control="deleteType" name="deleteType" value="single" inputId="delete-single"> </lfx-radio-button>
          <div class="flex-1">
            <label for="delete-single" class="font-medium text-gray-900 cursor-pointer">Delete only this occurrence</label>
            <div class="text-sm text-gray-600 mt-1">Only this meeting instance will be deleted. Future meetings in the series will remain.</div>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <lfx-radio-button [form]="deleteForm" control="deleteType" name="deleteType" value="future" inputId="delete-future"> </lfx-radio-button>
          <div class="flex-1">
            <label for="delete-future" class="font-medium text-gray-900 cursor-pointer">Delete this and future occurrences</label>
            <div class="text-sm text-gray-600 mt-1">This meeting and all future meetings in the series will be deleted. Past meetings will remain.</div>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <lfx-radio-button [form]="deleteForm" control="deleteType" name="deleteType" value="series" inputId="delete-series"> </lfx-radio-button>
          <div class="flex-1">
            <label for="delete-series" class="font-medium text-gray-900 cursor-pointer">Delete entire series</label>
            <div class="text-sm text-gray-600 mt-1">All meetings in this recurring series will be deleted permanently.</div>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Warning Message -->
  <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg">
    <div class="flex items-start gap-3">
      <i class="fa-light fa-triangle-exclamation text-red-500 mt-0.5"></i>
      <div>
        <h4 class="font-medium text-red-900">Warning</h4>
        <p class="text-sm text-red-700 mt-1">
          @if (isRecurring && !isPastMeeting && deleteForm.get('deleteType')?.value === 'series') {
            This will permanently delete all meetings in this series. This action cannot be undone.
          } @else if (isRecurring && !isPastMeeting && deleteForm.get('deleteType')?.value === 'future') {
            This will permanently delete this meeting and all future occurrences in the series. This action cannot be undone.
          } @else {
            This will permanently delete this meeting. This action cannot be undone.
          }
        </p>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-end gap-3">
    <lfx-button label="Cancel" severity="secondary" [outlined]="true" size="small" [disabled]="isDeleting()" (click)="onCancel()"> </lfx-button>

    <lfx-button
      [label]="isDeleting() ? 'Deleting...' : 'Delete Meeting'"
      severity="danger"
      size="small"
      [icon]="isDeleting() ? 'fa-light fa-circle-notch fa-spin' : 'fa-light fa-trash'"
      [disabled]="isDeleting()"
      (click)="onConfirm()">
    </lfx-button>
  </div>
</div>
